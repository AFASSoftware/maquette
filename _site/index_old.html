<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Maquette</title>

    <link rel="stylesheet" href="/maquette/stylesheets/styles.css">
    <link rel="stylesheet" href="/maquette/stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1><a href="/maquette/">Maquette</a></h1>
        <p>Maquette is a minimalistic Virtual DOM implementation which supports animated transitions.</p>

        <p class="view"><a href="https://github.com/johan-gorter/maquette">View the Project on GitHub</a></p>
      </header>
      <section>

         <h2>News</h2>

<p>
  
    <b>29 Dec 2014 </b> - 
    <a href="/maquette/2014/12/29/A-new-virtual-DOM-Framework.html">A new virtual dom framework</a>
  
</p>

<h2>Intro</h2>

<p>Maquette is a Javascript library which makes it easy to synchronize the DOM tree in the browser with your data.
It uses a technique called 'Virtual DOM'. 
Compared to other virtual DOM implementations, maquette has 3 advantages:</p>

<ul>
<li>It is very lightweight (2Kb gzipped)</li>
<li>It allows changes to be animated</li>
<li>It is optimized for speed</li>
</ul>

<p>While maquette is only focussed around the view of an application, we believe it is complete enough
to power a fully functional web application without needing yet another Javascript library.</p>

<p>Maquette allows you to write a <code>render()</code> function that turns your data into a virtual representation 
of the DOM tree.
Maquette will execute that function at convenient moments and adjust the DOM tree in the browser
accordingly.</p>

<p>The following code shows this mechanism in its most basic form:</p>

<div class="highlight highlight-js"><pre><span class="pl-c">// Data</span>
<span class="pl-s">var</span> name <span class="pl-k">=</span> <span class="pl-s1"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>;

<span class="pl-c">// Event handler for the 'input' event on the 'name' input</span>
<span class="pl-s">var</span> <span class="pl-en">nameInputHandler</span> <span class="pl-k">=</span> <span class="pl-st">function</span> (<span class="pl-vpf">evt</span>) {
  name <span class="pl-k">=</span> evt.<span class="pl-sc">target</span>.<span class="pl-sc">value</span>;
};

<span class="pl-c">// Renders the virtual DOM</span>
<span class="pl-s">var</span> <span class="pl-en">render</span> <span class="pl-k">=</span> <span class="pl-st">function</span> () {
  <span class="pl-k">return</span> h(<span class="pl-s1"><span class="pl-pds">"</span>body<span class="pl-pds">"</span></span>, [
    h(<span class="pl-s1"><span class="pl-pds">"</span>p.input<span class="pl-pds">"</span></span>, [
      h(<span class="pl-s1"><span class="pl-pds">"</span>span<span class="pl-pds">"</span></span>, [<span class="pl-s1"><span class="pl-pds">"</span>What is your name? <span class="pl-pds">"</span></span>]),
      h(<span class="pl-s1"><span class="pl-pds">"</span>input<span class="pl-pds">"</span></span>, { type<span class="pl-k">:</span> <span class="pl-s1"><span class="pl-pds">"</span>text<span class="pl-pds">"</span></span>, autofocus<span class="pl-k">:</span> <span class="pl-c1">true</span>, value<span class="pl-k">:</span> name, oninput<span class="pl-k">:</span> nameInputHandler })
    ]),
    name <span class="pl-k">?</span> h(<span class="pl-s1"><span class="pl-pds">"</span>p.output<span class="pl-pds">"</span></span>, [<span class="pl-s1"><span class="pl-pds">"</span>Hello <span class="pl-pds">"</span></span> <span class="pl-k">+</span> name <span class="pl-k">+</span> <span class="pl-s1"><span class="pl-pds">"</span>!<span class="pl-pds">"</span></span>]) <span class="pl-k">:</span> <span class="pl-c1">null</span>
  ]);
};

<span class="pl-c">// Starts the renderLoop, which renders the virtual DOM at the right moments</span>
maquette.renderLoop(<span class="pl-s3">document</span>.<span class="pl-sc">body</span>, render, {});</pre></div>

<p>The h() function is used to create virtual DOM nodes using a technique known as 'virtual hyperscript'.</p>

<p>The renderLoop schedules the <code>render()</code> function to be executed on requestAnimationFrame when needed. 
The renderLoop automatically schedules a render when a registered eventhandler on the DOM is called.</p>

<h2>
<a id="speed" class="anchor" href="#speed" aria-hidden="true"><span class="octicon octicon-link"></span></a>Speed</h2>

<p>The first question that people usually ask when they are new to virtual DOM is, how well does it perform?
After all, rendering the whole represenation of the DOM and determining the difference with the 
previous render seems slow.
In my experience, rendering and diffing a large screen (say 2000 DOM nodes) is easily done within a single 
frame (16ms) on modern devices. May the speed become an issue, maquette also has a powerful caching
mechanism which speeds up rendering and diffing significantly.</p>

<h2>
<a id="animated-transitions" class="anchor" href="#animated-transitions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Animated transitions</h2>

<p>Maquette allows adding and removing DOM nodes to be animated. 
It needs a transition plugin to do so. Right now the only available plugin uses VelocityJS.
A plugin which uses CSS Transitions will be developed soon. Follow the steps below to animate transitions:</p>

<ul>
<li>Add the velocity.js and velocityTransitions.js to the page (using script tags or requireJS)</li>
<li>Add the <code>transitions: velocityTransitions</code> option to the renderLoop.</li>
<li>Add enterAnimation and exitAnimation properties to the nodes that need to be animated.
The value for this property is the first argument for the velocity.animate function. 
You can use "slideDown" as enterAnimation and "slideUp" as exitAnimation for example.</li>
<li>Enjoy!</li>
</ul>

<p>More info can be found in the <a href="https://github.com/johan-gorter/maquette/blob/master/docs/API.md">API Reference</a>.</p>


<h2>Credits</h2>

<p>
Maquette was inspired by the following frameworks:
</p>

<ul>
<li><strong><a href="http://facebook.github.io/react/">React</a></strong> for inventing the virtual DOM technology.</li>
<li><strong><a href="http://lhorie.github.io/mithril/">Mithril</a></strong> for showing how simple and lightweight a virtual DOM can be.</li>
<li><strong><a href="https://github.com/Raynos/mercury">Mercury</a></strong> for exploring several tenchiques and optimizations.</li>
</ul>



      </section>
      <footer>
        <p>This project is maintained <br /> by <a href="https://github.com/johan-gorter">johan-gorter</a></p>
      </footer>
    </div>
    <script src="/maquette/javascripts/scale.fix.js"></script>
    
  </body>
</html>
