!function(e){"use strict";var n=!1,r=function(){},o=[],t=function(e,n){var r={};return Object.keys(e).forEach(function(n){r[n]=e[n]}),n&&Object.keys(n).forEach(function(e){r[e]=n[e]}),r},i=function(e,n,r,o,t){for(var d=0;d<n.length;d++){var l=n[d];Array.isArray(l)?o=i(l,r,o):(a(e,l,t),r.splice(o,0,l),o++)}return o},a=function(e,r,o){if(!n){var t=r.vnodeSelector;if(!(""===t||r.properties&&r.properties.key)){for(var i=0;i<o.length;i++)if(t===o[i])throw new Error("["+e+"] contains undistinguishable child nodes ["+t+"], please add unique key properties.");o.push(t)}}},d=function(e){return{vnodeSelector:"",text:null==e?"":""+e,domNode:null}},l=function(e,n){if(null===n||void 0===n)return null;if(!Array.isArray(n))return n.hasOwnProperty("vnodeSelector")?[n]:[d(n)];for(var r=0,o=[];r<n.length;){var t=n[r];null===t||void 0===t?n.splice(r,1):Array.isArray(t)?(n.splice(r,1),r=i(e,t,n,r,o)):t.hasOwnProperty("vnodeSelector")?(a(e,t,o),r++):(n[r]=d(t),r++)}return n},u=/([\.#]?[a-zA-Z0-9_:-]+)/,s={nodeToRemove:function(e){e.parentNode.removeChild(e)},nodeAdded:r,nodeUpdated:r},c={namespace:null,transitions:s},f=function(e){return t(c,e)},p=function(e,n,r){if(n){var o=r.eventHandlerInterceptor;for(var t in n){var i=n[t];if("class"===t||"className"===t||"classList"===t)throw new Error("Not supported, use 'classes' instead.");if("classes"===t)for(var a in i)i[a]&&e.classList.add(a);else o&&"function"==typeof i&&(i=o(t,i)),e[t]=i}}},m=function(e,n,r){if(r)for(var o in r){var t=r[o],i=n[o];if("classes"===o){if(t===i)continue;for(var a in t){var d=!!t[a],l=!!i[a];d!==l&&(d?e.classList.add(a):e.classList.remove(a))}}else{if(t||"string"!=typeof i||(t=""),"value"===o){if(e.value===t)continue;e.value=t;continue}if(t!==i){if("function"==typeof t)throw new Error("Functions may not be updated on subsequent calls (property: "+o+")");e[o]=t}}}},v=function(e,n,r){n&&n.forEach(function(n){g(n,function(n){e.appendChild(n)},r)})},h=function(e,n){return e.vnodeSelector!==n.vnodeSelector?!1:e.properties&&n.properties?e.properties.key===n.properties.key:!e.properties&&!n.properties},w=function(e,n,r){if(""!==n.vnodeSelector)for(var o=r;o<e.length;o++)if(h(e[o],n))return o;return-1},y=function(e,n,r,t){if(n!==r){n=n||o,r=r||o;for(var i,a=t.transitions,d=0,l=0;l<r.length;){var u=d<n.length?n[d]:null,s=r[l];if(u&&h(u,s))S(u,s,t),d++;else{var c=w(n,s,d+1);if(c>=0){for(i=d;c>i;i++)a.nodeToRemove(n[i].domNode);S(n[c],s,t),d=c+1}else g(s,function(r){if(d<n.length){var o=n[d];o.domNode.parentNode.insertBefore(r,o.domNode)}else e.appendChild(r)},t),a.nodeAdded(s.domNode)}l++}if(n.length>d)for(i=d;i<n.length;i++)a.nodeToRemove(n[i].domNode)}},g=function(e,n,r){if(""===e.vnodeSelector)e.domNode=document.createTextNode(e.text),n(e.domNode);else{var o,i,a,d,l=e.vnodeSelector.split(u);for(a=0;a<l.length;a++)i=l[a],i&&(d=i.charAt(0),o?"."===d?o.classList.add(i.substring(1)):"#"===d&&(o.id=i.substr(1)):("svg"===i&&(r=t(r,{namespace:"http://www.w3.org/2000/svg"})),o=e.domNode=r.namespace?document.createElementNS(r.namespace,i):document.createElement(i),n(o)));N(o,e,r)}},N=function(e,n,r){p(e,n.properties,r),v(e,n.children,r),n.properties&&n.properties.afterCreate&&n.properties.afterCreate(e,r,n.vnodeSelector,n.properties,n.children)},S=function(e,n,r){var o=e.domNode;if(!o)throw new Error("previous node was not mounted");e!==n&&(""===n.vnodeSelector?n.text!==e.text&&(o.nodeValue=n.text):(m(o,e.properties,n.properties,r),y(o,e.children,n.children,r),n.properties&&n.properties.afterUpdate&&n.properties.afterUpdate(o,r,n.vnodeSelector,n.properties,n.children)),n.domNode=e.domNode)};window.performance=window.performance||{offset:new Date,now:function(){return new Date-this.offset}};var A={lastCreateVDom:null,lastCreateDom:null,lastUpdateVDom:null,lastUpdateDom:null,lastRenderLoop:null,createExecuted:function(e,n,r,o){A.lastRenderLoop=o,A.lastCreateVDom=n-e,A.lastCreateDom=r-n},updateExecuted:function(e,n,r,o){A.lastRenderLoop=o,A.lastUpdateVDom=n-e,A.lastUpdateDom=r-n}},D=function(e,n){return{update:function(r){if(e.vnodeSelector!==r.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using mergeDom with one extra level)");S(e,r,n),e=r},domNode:e.domNode}},E={h:function(e,n,r){return!r&&("string"==typeof n||Array.isArray(n)||n&&n.hasOwnProperty("vnodeSelector"))&&(r=n,n=null),r=l(e,r),{vnodeSelector:e,properties:n,children:r,domNode:null}},createDom:function(e,n){return n=f(n),g(e,r,n),D(e,n)},appendToDom:function(e,n,r){return r=f(r),g(n,function(n){e.appendChild(n)},r),D(n,r)},mergeDom:function(e,n,r){return r=f(r),n.domNode=e,N(e,n,r),D(n,r)},renderLoop:function(e,n,r){r=f(r),r.eventHandlerInterceptor=function(e,n){return function(){return d.scheduleRender(),n.apply(this,arguments)}};var o,t=null,i=!1,a=function(){if(o=null,t){var i=window.performance.now(),a=n(),l=window.performance.now();t.update(a),A.updateExecuted(i,l,window.performance.now(),d)}else{var u=window.performance.now(),s=n(),c=window.performance.now();t=E.mergeDom(e,s,r),A.createExecuted(u,c,window.performance.now(),d)}};o=requestAnimationFrame(a);var d={scheduleRender:function(){o||i||(o=requestAnimationFrame(a))},destroy:function(){o&&(cancelAnimationFrame(o),o=null),i=!0}};return d},createCache:function(){var e=null,n=null,r={invalidate:function(){n=null,e=null},result:function(r,o){if(e)for(var t=0;t<r.length;t++)e[t]!==r[t]&&(n=null);return n||(n=o(),e=r),n}};return r},stats:A};void 0!==e.module&&e.module.exports?e.module.exports=E:"function"==typeof e.define&&e.define.amd?e.define(function(){return E}):e.domdirector=E}(this);