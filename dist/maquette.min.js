!function(e){"use strict";var n=!1,r=function(){},o=[],t=function(e,n){var r={};return Object.keys(e).forEach(function(n){r[n]=e[n]}),n&&Object.keys(n).forEach(function(e){r[e]=n[e]}),r},i=function(e,n,r,o,t){for(var a=0;a<n.length;a++){var s=n[a];Array.isArray(s)?o=i(s,r,o):(d(e,s,t),r.splice(o,0,s),o++)}return o},d=function(e,r,o){if(!n){var t=r.vnodeSelector;if(!(""===t||r.properties&&r.properties.key)){for(var i=0;i<o.length;i++)if(t===o[i])throw new Error("["+e+"] contains undistinguishable child nodes ["+t+"], please add unique key properties.");o.push(t)}}},a=function(e){return{vnodeSelector:"",text:null==e?"":""+e,domNode:null}},s=function(e,n){if(null===n||void 0===n)return null;if(!Array.isArray(n))return n.hasOwnProperty("vnodeSelector")?[n]:[a(n)];for(var r=0,o=[];r<n.length;){var t=n[r];null===t||void 0===t?n.splice(r,1):Array.isArray(t)?(n.splice(r,1),r=i(e,t,n,r,o)):t.hasOwnProperty("vnodeSelector")?(d(e,t,o),r++):(n[r]=a(t),r++)}return n},u=/([\.#]?[a-zA-Z0-9_:-]+)/,l={nodeToRemove:function(e){e.parentNode.removeChild(e)},nodeAdded:function(){},nodeUpdated:function(){}},c={namespace:null,transitions:l},p=function(e){return t(c,e)},f=function(e,n,r){if(n){var o=r.eventHandlerInterceptor;for(var t in n){var i=n[t];if("class"===t||"className"===t||"classList"===t)throw new Error("Not supported, use 'classes' instead.");if("classes"===t)for(var d in i)i[d]&&e.classList.add(d);else{if("key"===t)continue;var a=typeof i;"function"===a?(o&&(i=o(t,i,e)),e[t]=i):"string"===a?e.setAttribute(t,i):e[t]=i}}}},v=function(e,n,r,o){if(r){var t=o.transitions;for(var i in r){var d=r[i],a=n[i];if("classes"===i){if(d===a)continue;var s=e.classList;for(var u in d){var l=!!d[u],c=!!a[u];l!==c&&(l?(s.add(u),t.nodeUpdated(e,"addClass",u,void 0,void 0)):(s.remove(u),t.nodeUpdated(e,"removeClass",u,void 0,void 0)))}}else{if(d||"string"!=typeof a||(d=""),"value"===i){if(e.value===d){d!==a&&t.nodeUpdated(e,"property","value",d,a);continue}e.value=d,d!==a&&t.nodeUpdated(e,"property","value",d,a);continue}if(d!==a){var p=typeof d;if("function"===p)throw new Error("Functions may not be updated on subsequent renders (property: "+i+")");"string"===p?e.setAttribute(i,d):e[i]=d,t.nodeUpdated(e,"property",i,d,a)}}}}},m=function(e,n,r){n&&n.forEach(function(n){g(n,function(n){e.appendChild(n)},r)})},h=function(e,n){return e.vnodeSelector!==n.vnodeSelector?!1:e.properties&&n.properties?e.properties.key===n.properties.key:!e.properties&&!n.properties},w=function(e,n,r){if(""!==n.vnodeSelector)for(var o=r;o<e.length;o++)if(h(e[o],n))return o;return-1},y=function(e,n,r,t){if(n!==r){n=n||o,r=r||o;for(var i,d=t.transitions,a=0,s=0;s<r.length;){var u=a<n.length?n[a]:null,l=r[s];if(u&&h(u,l))A(u,l,t),a++;else{var c=w(n,l,a+1);if(c>=0){for(i=a;c>i;i++)d.nodeToRemove(n[i].domNode,n[i].properties);A(n[c],l,t),a=c+1}else g(l,function(r){if(a<n.length){var o=n[a];o.domNode.parentNode.insertBefore(r,o.domNode)}else e.appendChild(r)},t),d.nodeAdded(l.domNode,l.properties)}s++}if(n.length>a)for(i=a;i<n.length;i++)d.nodeToRemove(n[i].domNode,n[i].properties)}},g=function(e,n,r){if(""===e.vnodeSelector)e.domNode=document.createTextNode(e.text),n(e.domNode);else{var o,i,d,a,s=e.vnodeSelector.split(u);for(d=0;d<s.length;d++)i=s[d],i&&(a=i.charAt(0),o?"."===a?o.classList.add(i.substring(1)):"#"===a&&(o.id=i.substr(1)):("svg"===i&&(r=t(r,{namespace:"http://www.w3.org/2000/svg"})),o=e.domNode=r.namespace?document.createElementNS(r.namespace,i):document.createElement(i),n(o)));N(o,e,r)}},N=function(e,n,r){f(e,n.properties,r),m(e,n.children,r),n.properties&&n.properties.afterCreate&&n.properties.afterCreate(e,r,n.vnodeSelector,n.properties,n.children)},A=function(e,n,r){var o=e.domNode;if(!o)throw new Error("previous node was not mounted");e!==n&&(""===n.vnodeSelector?n.text!==e.text&&(o.nodeValue=n.text,r.transitions.nodeUpdated(o,"text",void 0,n.text,e.text)):(v(o,e.properties,n.properties,r),y(o,e.children,n.children,r),n.properties&&n.properties.afterUpdate&&n.properties.afterUpdate(o,r,n.vnodeSelector,n.properties,n.children)),n.domNode=e.domNode)};window.performance=window.performance||{offset:new Date,now:function(){return new Date-this.offset}};var S={lastCreateVDom:null,lastCreateDom:null,lastUpdateVDom:null,lastUpdateDom:null,lastRenderLoop:null,createExecuted:function(e,n,r,o){S.lastRenderLoop=o,S.lastCreateVDom=n-e,S.lastCreateDom=r-n},updateExecuted:function(e,n,r,o){S.lastRenderLoop=o,S.lastUpdateVDom=n-e,S.lastUpdateDom=r-n}},x=function(e,n){return{update:function(r){if(e.vnodeSelector!==r.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using mergeDom with one extra level)");A(e,r,n),e=r},domNode:e.domNode}},D={h:function(e,n,r){return!r&&("string"==typeof n||Array.isArray(n)||n&&n.hasOwnProperty("vnodeSelector"))&&(r=n,n=null),r=s(e,r),{vnodeSelector:e,properties:n,children:r,domNode:null}},createDom:function(e,n){return n=p(n),g(e,r,n),x(e,n)},appendToDom:function(e,n,r){return r=p(r),g(n,function(n){e.appendChild(n)},r),x(n,r)},mergeDom:function(e,n,r){return r=p(r),n.domNode=e,N(e,n,r),x(n,r)},renderLoop:function(e,n,r){r=p(r),r.eventHandlerInterceptor=function(e,n){return function(){return a.scheduleRender(),n.apply(this,arguments)}};var o,t=null,i=!1,d=function(){if(o=null,t){var i=window.performance.now(),d=n(),s=window.performance.now();t.update(d),S.updateExecuted(i,s,window.performance.now(),a)}else{var u=window.performance.now(),l=n(),c=window.performance.now();t=D.mergeDom(e,l,r),S.createExecuted(u,c,window.performance.now(),a)}};o=requestAnimationFrame(d);var a={scheduleRender:function(){o||i||(o=requestAnimationFrame(d))},destroy:function(){o&&(cancelAnimationFrame(o),o=null),i=!0}};return a},createCache:function(){var e=null,n=null,r={invalidate:function(){n=null,e=null},result:function(r,o){if(e)for(var t=0;t<r.length;t++)e[t]!==r[t]&&(n=null);return n||(n=o(),e=r),n}};return r},stats:S};void 0!==e.module&&e.module.exports?e.module.exports=D:"function"==typeof e.define&&e.define.amd&&e.define(function(){return D}),window&&(window.maquette=D)}(this);