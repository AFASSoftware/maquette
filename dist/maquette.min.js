!function(e,r){"function"==typeof define&&define.amd?define(["exports"],r):r("object"==typeof exports&&"string"!=typeof exports.nodeName?exports:e.maquette={})}(this,function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,t,o="http://www.w3.org/2000/svg",n=[],i=function(e,r){var t={};return Object.keys(e).forEach(function(r){t[r]=e[r]}),r&&Object.keys(r).forEach(function(e){t[e]=r[e]}),t},s=function(e,r){return e.vnodeSelector===r.vnodeSelector&&(e.properties&&r.properties?e.properties.key===r.properties.key&&e.properties.bind===r.properties.bind:!e.properties&&!r.properties)},p=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},a=function(e,r,t){for(var o=0,n=r.length;o<n;o++){var i=r[o];Array.isArray(i)?a(e,i,t):null!==i&&void 0!==i&&(i.hasOwnProperty("vnodeSelector")||(i=p(i)),t.push(i))}},d=function(){throw new Error("Provide a transitions object to the projectionOptions to do animations")},c={namespace:void 0,eventHandlerInterceptor:void 0,styleApplyer:function(e,r,t){e.style[r]=t},transitions:{enter:d,exit:d}},u=function(e){return i(c,e)},l=function(e){if("string"!=typeof e)throw new Error("Style values must be strings")},f=function(e,r,t){if(r)for(var n=t.eventHandlerInterceptor,i=Object.keys(r),s=i.length,p=0;p<s;p++)!function(s){var p=i[s],a=r[p];if("className"===p)throw new Error('Property "className" is not supported, use "class".');if("class"===p)a.split(/\s+/).forEach(function(r){return e.classList.add(r)});else if("classes"===p)for(var d=Object.keys(a),c=d.length,u=0;u<c;u++){var f=d[u];a[f]&&e.classList.add(f)}else if("styles"===p)for(var v=Object.keys(a),h=v.length,u=0;u<h;u++){var m=v[u],y=a[m];y&&(l(y),t.styleApplyer(e,m,y))}else if("key"!==p&&null!==a&&void 0!==a){var g=typeof a;"function"===g?0===p.lastIndexOf("on",0)&&(n&&(a=n(p,a,e,r)),"oninput"===p&&function(){var e=a;a=function(r){e.apply(this,[r]),r.target["oninput-value"]=r.target.value}}(),e[p]=a):"string"===g&&"value"!==p&&"innerHTML"!==p?t.namespace===o&&"href"===p?e.setAttributeNS("http://www.w3.org/1999/xlink",p,a):e.setAttribute(p,a):e[p]=a}}(p)},v=function(e,r,t,n){if(t){for(var i=!1,s=Object.keys(t),p=s.length,a=0;a<p;a++){var d=s[a],c=t[d],u=r[d];if("class"===d){if(u!==c)throw new Error('"class" property may not be updated. Use the "classes" property for conditional css classes.')}else if("classes"===d)for(var f=e.classList,v=Object.keys(c),h=v.length,m=0;m<h;m++){var y=v[m],g=!!c[y];g!==!!u[y]&&(i=!0,g?f.add(y):f.remove(y))}else if("styles"===d)for(var w=Object.keys(c),b=w.length,m=0;m<b;m++){var N=w[m],x=c[N];x!==u[N]&&(i=!0,x?(l(x),n.styleApplyer(e,N,x)):n.styleApplyer(e,N,""))}else if(c||"string"!=typeof u||(c=""),"value"===d){var A=e[d];A!==c&&(e["oninput-value"]?A===e["oninput-value"]:c!==u)&&(e[d]=c,e["oninput-value"]=void 0),c!==u&&(i=!0)}else if(c!==u){var S=typeof c;if("function"===S)throw new Error("Functions may not be updated on subsequent renders (property: "+d+"). Hint: declare event handler functions outside the render() function.");"string"===S&&"innerHTML"!==d?n.namespace===o&&"href"===d?e.setAttributeNS("http://www.w3.org/1999/xlink",d,c):"role"===d&&""===c?e.removeAttribute(d):e.setAttribute(d,c):e[d]!==c&&(e[d]=c),i=!0}}return i}},h=function(e,r,t){if(""!==r.vnodeSelector)for(var o=t;o<e.length;o++)if(s(e[o],r))return o;return-1},m=function(e,r){if(e.properties){var t=e.properties.enterAnimation;t&&("function"==typeof t?t(e.domNode,e.properties):r.enter(e.domNode,e.properties,t))}},y=function(e,r){var t=e.domNode;if(e.properties){var o=e.properties.exitAnimation;if(o){t.style.pointerEvents="none";var n=function(){t.parentNode&&t.parentNode.removeChild(t)};return"function"==typeof o?void o(t,n,e.properties):void r.exit(e.domNode,e.properties,o,n)}}t.parentNode&&t.parentNode.removeChild(t)},g=function(e,r,t,o){var n=e[r];if(""!==n.vnodeSelector){var i=n.properties;if(!(i?void 0===i.key?i.bind:i.key:void 0))for(var p=0;p<e.length;p++)if(p!==r){var a=e[p];if(s(a,n))throw"added"===o?new Error(t.vnodeSelector+" had a "+n.vnodeSelector+" child added, but there is now more than one. You must add unique key properties to make them distinguishable."):new Error(t.vnodeSelector+" had a "+n.vnodeSelector+" child removed, but there were more than one. You must add unique key properties to make them distinguishable.")}}},w=function(e,o,i,p,a){if(i===p)return!1;i=i||n,p=p||n;for(var d,c=i.length,u=p.length,l=a.transitions,f=0,v=0,w=!1;v<u;){var b=f<c?i[f]:void 0,N=p[v];if(void 0!==b&&s(b,N))w=t(b,N,a)||w,f++;else{var x=h(i,N,f+1);if(x>=0){for(d=f;d<x;d++)y(i[d],l),g(i,d,e,"removed");w=t(i[x],N,a)||w,f=x+1}else r(N,o,f<c?i[f].domNode:void 0,a),m(N,l),g(p,v,e,"added")}v++}if(c>f)for(d=f;d<c;d++)y(i[d],l),g(i,d,e,"removed");return w},b=function(e,t,o){if(t)for(var n=0;n<t.length;n++)r(t[n],e,void 0,o)},N=function(e,r,t){b(e,r.children,t),r.text&&(e.textContent=r.text),f(e,r.properties,t),r.properties&&r.properties.afterCreate&&r.properties.afterCreate.apply(r.properties.bind||r.properties,[e,t,r.vnodeSelector,r.properties,r.children])},x=function(e,r,t,o){t.properties&&t.properties.beforeAttach&&t.properties.beforeAttach.apply(t.properties.bind||t.properties,[e,r]),o?e.insertBefore(r,o):r.parentNode!==e&&e.appendChild(r)};r=function(e,r,t,n){var s,p,a,d,c,u=!(!e.properties||!e.properties.delayAttach),l=0,f=e.vnodeSelector,v=r.ownerDocument;if(""===f)s=e.domNode=v.createTextNode(e.text),u||x(r,s,e,t);else{for(p=0;p<=f.length;++p)a=f.charAt(p),p!==f.length&&"."!==a&&"#"!==a||(d=f.charAt(l-1),c=f.slice(l,p),"."===d?s.classList.add(c):"#"===d?s.id=c:("svg"===c&&(n=i(n,{namespace:o})),void 0!==n.namespace?s=e.domNode=v.createElementNS(n.namespace,c):(s=e.domNode=e.domNode||v.createElement(c),"input"===c&&e.properties&&void 0!==e.properties.type&&s.setAttribute("type",e.properties.type)),u||x(r,s,e,t)),l=p+1);N(s,e,n),u&&x(r,s,e,t)}},t=function(e,r,t){var n=e.domNode,s=!1;if(e===r)return!1;var p=!1;if(""===r.vnodeSelector){if(r.text!==e.text){var a=n.ownerDocument.createTextNode(r.text);return n.parentNode.replaceChild(a,n),r.domNode=a,s=!0}}else 0===r.vnodeSelector.lastIndexOf("svg",0)&&(t=i(t,{namespace:o})),e.text!==r.text&&(p=!0,void 0===r.text?n.removeChild(n.firstChild):n.textContent=r.text),p=w(r,n,e.children,r.children,t)||p,p=v(n,e.properties,r.properties,t)||p,r.properties&&r.properties.afterUpdate&&r.properties.afterUpdate.apply(r.properties.bind||r.properties,[n,t,r.vnodeSelector,r.properties,r.children]);return p&&r.properties&&r.properties.updateAnimation&&r.properties.updateAnimation(n,r.properties,e.properties),r.domNode=e.domNode,s};var A=function(e,r){return{update:function(o){if(e.vnodeSelector!==o.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");t(e,o,r),e=o},domNode:e.domNode}};e.h=function(e){var r=arguments[1];if("string"!=typeof e)throw new Error;var t=1;!r||r.hasOwnProperty("vnodeSelector")||Array.isArray(r)||"object"!=typeof r?r=void 0:t=2;var o,n,i=arguments.length;if(i===t+1){var s=arguments[t];"string"==typeof s?o=s:void 0!==s&&null!==s&&1===s.length&&"string"==typeof s[0]&&(o=s[0])}if(void 0===o)for(n=[];t<i;t++){var d=arguments[t];null===d||void 0===d||(Array.isArray(d)?a(e,d,n):d.hasOwnProperty("vnodeSelector")?n.push(d):n.push(p(d)))}return{vnodeSelector:e,properties:r,children:n,text:""===o?void 0:o,domNode:null}},e.dom={create:function(e,t){return t=u(t),r(e,document.createElement("div"),void 0,t),A(e,t)},append:function(e,t,o){return o=u(o),r(t,e,void 0,o),A(t,o)},insertBefore:function(e,t,o){return o=u(o),r(t,e.parentNode,e,o),A(t,o)},merge:function(e,r,t){return t=u(t),r.domNode=e,N(e,r,t),A(r,t)},replace:function(e,t,o){return o=u(o),r(t,e.parentNode,e,o),e.parentNode.removeChild(e),A(t,o)}},e.createCache=function(){var e,r;return{invalidate:function(){r=void 0,e=void 0},result:function(t,o){if(e)for(var n=0;n<t.length;n++)e[n]!==t[n]&&(r=void 0);return r||(r=o(),e=t),r}}},e.createMapping=function(e,r,t){var o=[],n=[];return{results:n,map:function(i){for(var s=i.map(e),p=n.slice(),a=0,d=0;d<i.length;d++){var c=i[d],u=s[d];if(u===o[a])n[d]=p[a],t(c,p[a],d),a++;else{for(var l=!1,f=1;f<o.length+1;f++){var v=(a+f)%o.length;if(o[v]===u){n[d]=p[v],t(i[d],p[v],d),a=v+1,l=!0;break}}l||(n[d]=r(c,d))}}n.length=i.length,o=s}}},e.createProjector=function(r){var t,o=u(r);o.eventHandlerInterceptor=function(e,r,o,n){return function(){return t.scheduleRender(),r.apply(n.bind||this,arguments)}};var n,i=!0,s=!1,p=[],a=[],d=function(){if(n=void 0,i){i=!1;for(var e=0;e<p.length;e++){var r=a[e]();p[e].update(r)}i=!0}};return t={renderNow:d,scheduleRender:function(){n||s||(n=requestAnimationFrame(d))},stop:function(){n&&(cancelAnimationFrame(n),n=void 0),s=!0},resume:function(){s=!1,i=!0,t.scheduleRender()},append:function(r,t){p.push(e.dom.append(r,t(),o)),a.push(t)},insertBefore:function(r,t){p.push(e.dom.insertBefore(r,t(),o)),a.push(t)},merge:function(r,t){p.push(e.dom.merge(r,t(),o)),a.push(t)},replace:function(r,t){p.push(e.dom.replace(r,t(),o)),a.push(t)},detach:function(e){for(var r=0;r<a.length;r++)if(a[r]===e)return a.splice(r,1),p.splice(r,1)[0];throw new Error("renderMaquetteFunction was not found")}}}});
//# sourceMappingURL=maquette.min.js.map
