!function(e){"use strict";var r=[],t=function(e,r){var t={};return Object.keys(e).forEach(function(r){t[r]=e[r]}),r&&Object.keys(r).forEach(function(e){t[e]=r[e]}),t},o=function(e,r,t,i){for(var a=0;a<r.length;a++){var d=r[a];Array.isArray(d)?i=o(e,d,t,i):null!==d&&void 0!==d&&(d.hasOwnProperty("vnodeSelector")||(d=n(d)),t.splice(i,0,d),i++)}return i},n=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:null===e||void 0===e?"":e.toString(),domNode:null}},i=function(e,r){if(null===r||void 0===r)return void 0;if(!Array.isArray(r))return r.hasOwnProperty("vnodeSelector")?[r]:[n(r)];for(var t=0;t<r.length;){var i=r[t];null===i||void 0===i?r.splice(t,1):Array.isArray(i)?(r.splice(t,1),t=o(e,i,r,t)):i.hasOwnProperty("vnodeSelector")?t++:(r[t]=n(i),t++)}return r},a=function(){throw new Error("Provide a transitions object to the projectionOptions to do animations")},d={namespace:void 0,transitions:{enter:a,exit:a}},s=function(e){return t(d,e)},u=function(e,r,t){if(r){var o=t.eventHandlerInterceptor;for(var n in r){var i=r[n];if("class"===n||"className"===n||"classList"===n)throw new Error("Property "+n+" is not supported, use 'classes' instead.");if("classes"===n)for(var a in i)i[a]&&e.classList.add(a);else if("styles"===n)for(var d in i){var s=i[d];if(s){if("string"!=typeof s)throw new Error("Style values may only be strings");e.style[d]=s}}else{if("key"===n)continue;if(null===i||void 0===i)continue;var u=typeof i;"function"===u?(o&&0===n.lastIndexOf("on",0)&&(i=o(n,i,e,r),"oninput"===n&&!function(){var e=i;i=function(r){r.target["oninput-value"]=r.target.value,e.apply(this,[r])}}()),e[n]=i):"string"===u&&"value"!==n?e.setAttribute(n,i):e[n]=i}}}},p=function(e,r,t,o){if(t){var n=!1;for(var i in t){var a=t[i],d=r[i];if("classes"===i){var s=e.classList;for(var u in a){var p=!!a[u],c=!!d[u];p!==c&&(n=!0,p?s.add(u):s.remove(u))}}else if("styles"===i)for(var f in a){var l=a[f],v=d[f];if(l!==v)if(n=!0,l){if("string"!=typeof l)throw new Error("Style values may only be strings");e.style[f]=l}else e.style[f]=""}else if(a||"string"!=typeof d||(a=""),"value"===i)e[i]!==a&&e["oninput-value"]!==a&&(e[i]=a,e["oninput-value"]=void 0),a!==d&&(n=!0);else if(a!==d){var h=typeof a;if("function"===h)throw new Error("Functions may not be updated on subsequent renders (property: "+i+"). Hint: declare event handler functions outside the render() function.");"string"===h?e.setAttribute(i,a):e[i]=a,n=!0}}return n}},c=function(e,r,t){if(r)for(var o=0;o<r.length;o++)g(r[o],e,void 0,t)},f=function(e,r){return e.vnodeSelector!==r.vnodeSelector?!1:e.properties&&r.properties?e.properties.key===r.properties.key:!e.properties&&!r.properties},l=function(e,r,t){if(""!==r.vnodeSelector)for(var o=t;o<e.length;o++)if(f(e[o],r))return o;return-1},v=function(e,r){if(e.properties){var t=e.properties.enterAnimation;t&&("function"==typeof t?t(e.domNode,e.properties):r.enter(e.domNode,e.properties,t))}},h=function(e,r){var t=e.domNode;if(e.properties){var o=e.properties.exitAnimation;if(o){t.style.pointerEvents="none";var n=function(){t.parentNode&&t.parentNode.removeChild(t)};return"function"==typeof o?void o(t,n,e.properties):void r.exit(e.domNode,e.properties,o,n)}}t.parentNode&&t.parentNode.removeChild(t)},m=function(e,r,t,o){var n=e[r];if(""!==n.vnodeSelector){var i=n.properties?n.properties.key:void 0;if(!i)for(var a=0;a<e.length;a++)if(a!==r){var d=e[a];if(f(d,n))throw new Error("added"===o?t.vnodeSelector+" had a "+n.vnodeSelector+" child added, but there is now more than one. You must add unique key properties to make them distinguishable.":t.vnodeSelector+" had a "+n.vnodeSelector+" child removed, but there were more than one. You must add unique key properties to make them distinguishable.")}}},y=function(e,t,o,n,i){if(o===n)return!1;o=o||r,n=n||r;for(var a,d=i.transitions,s=0,u=0,p=!1;u<n.length;){var c=s<o.length?o[s]:void 0,y=n[u];if(void 0!==c&&f(c,y))p=N(c,y,i)||p,s++;else{var w=l(o,y,s+1);if(w>=0){for(a=s;w>a;a++)h(o[a],d),m(o,a,e,"removed");p=N(o[w],y,i)||p,s=w+1}else g(y,t,s<o.length?o[s].domNode:void 0,i),v(y,d),m(n,u,e,"added")}u++}if(o.length>s)for(a=s;a<o.length;a++)h(o[a],d),m(o,a,e,"removed");return p},g=function(e,r,o,n){var i,a,d,s,u,p=0,c=e.vnodeSelector;if(""===c)i=e.domNode=document.createTextNode(e.text),void 0!==o?r.insertBefore(i,o):r.appendChild(i);else{for(a=0;a<=c.length;++a)d=c.charAt(a),(a===c.length||"."===d||"#"===d)&&(s=c.charAt(p-1),u=c.slice(p,a),"."===s?i.classList.add(u):"#"===s?i.id=u:("svg"===u&&(n=t(n,{namespace:"http://www.w3.org/2000/svg"})),i=e.domNode=void 0!==n.namespace?document.createElementNS(n.namespace,u):document.createElement(u),void 0!==o?r.insertBefore(i,o):r.appendChild(i)),p=a+1);w(i,e,n)}},w=function(e,r,t){c(e,r.children,t),r.text&&(e.textContent=r.text),u(e,r.properties,t),r.properties&&r.properties.afterCreate&&r.properties.afterCreate(e,t,r.vnodeSelector,r.properties,r.children)},N=function(e,r,o){var n=e.domNode;if(!n)throw new Error("previous node was not rendered");var i=!1;if(e===r)return i;var a=!1;return""===r.vnodeSelector?r.text!==e.text&&(n.nodeValue=r.text,i=!0):("svg"===r.vnodeSelector.substr(0,3)&&(o=t(o,{namespace:"http://www.w3.org/2000/svg"})),e.text!==r.text&&(i=!0,void 0===r.text?n.removeChild(n.firstChild):n.textContent=r.text),a=y(r,n,e.children,r.children,o),a=p(n,e.properties,r.properties,o)||a,r.properties&&r.properties.afterUpdate&&r.properties.afterUpdate(n,o,r.vnodeSelector,r.properties,r.children)),a&&r.properties&&r.properties.updateAnimation&&r.properties.updateAnimation(n,r.properties,e.properties),r.domNode=e.domNode,i},S=function(e,r){if(!e.vnodeSelector)throw new Error("Invalid vnode argument");return{update:function(t){if(e.vnodeSelector!==t.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");N(e,t,r),e=t},domNode:e.domNode}},x={h:function(e,r,t){if(2===arguments.length&&"string"==typeof e){if(Array.isArray(r))t=r,r=void 0;else if(void 0===r)throw new Error("undefined is not a valid value for properties, maybe you forgot the comma between } and [ ?")}else if("string"!=typeof e||t&&!Array.isArray(t)||void 0!==r&&"object"!=typeof r)throw new Error("Incorrect arguments passed to the h() function. Correct signature: h(string, optional object, optional array)");var o=void 0;return t&&1===t.length&&"string"==typeof t[0]?(o=t[0],t=void 0):t=i(e,t),{vnodeSelector:e,properties:r,children:t,text:o,domNode:null}},dom:{create:function(e,r){return r=s(r),g(e,document.createElement("div"),void 0,r),S(e,r)},append:function(e,r,t){return t=s(t),g(r,e,void 0,t),S(r,t)},insertBefore:function(e,r,t){return t=s(t),g(r,e.parentNode,e,t),S(r,t)},merge:function(e,r,t){return t=s(t),r.domNode=e,w(e,r,t),S(r,t)}},createCache:function(){var e=void 0,r=void 0,t={invalidate:function(){r=void 0,e=void 0},result:function(t,o){if(e)for(var n=0;n<t.length;n++)e[n]!==t[n]&&(r=void 0);return r||(r=o(),e=t),r}};return t},createMapping:function(e,r,t){var o=[],n=[];return{results:n,map:function(i){for(var a=i.map(e),d=n.slice(),s=0,u=0;u<i.length;u++){var p=i[u],c=a[u];if(c===o[s])n[u]=d[s],t(p,d[s],u),s++;else{for(var f=!1,l=1;l<o.length;l++){var v=(s+l)%o.length;if(o[v]===c){n[u]=d[v],t(i[u],d[v],u),s=v+1,f=!0;break}}f||(n[u]=r(p,u))}}n.length=i.length,o=a}}},createProjector:function(e){e=s(e),e.eventHandlerInterceptor=function(e,r){return function(){return d.scheduleRender(),r.apply(this,arguments)}};var r,t=!0,o=!1,n=[],i=[],a=function(){if(r=void 0,t){t=!1;for(var e=0;e<n.length;e++){var o=i[e]();n[e].update(o)}t=!0}},d={scheduleRender:function(){r||o||(r=requestAnimationFrame(a))},stop:function(){r&&(cancelAnimationFrame(r),r=void 0),o=!0},resume:function(){o=!1,t=!0,d.scheduleRender()},evaluateHyperscript:function(e,r){var t=e.querySelectorAll("script[type='text/hyperscript']"),o=["maquette","h","enhancer"],n=[x,x.h,d];Object.keys(r).forEach(function(e){o.push(e),n.push(r[e])}),Array.prototype.forEach.call(t,function(e){var r=new Function(o,"return "+e.textContent.trim()),t=function(){return r.apply(void 0,n)};d.insertBefore(e,t)})},append:function(r,t){n.push(x.dom.append(r,t(),e)),i.push(t)},insertBefore:function(r,t){n.push(x.dom.insertBefore(r,t(),e)),i.push(t)},merge:function(r,t){n.push(x.dom.merge(r,t(),e)),i.push(t)},replace:function(r,t){var o=t();g(o,r.parentNode,r,e),r.parentNode.removeChild(r),n.push(S(o,e)),i.push(t)}};return d}};"undefined"!=typeof module&&module.exports?module.exports=x:"function"==typeof define&&define.amd?define(function(){return x}):window.maquette=x}(this);