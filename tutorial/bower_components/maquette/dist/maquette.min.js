!function(e){"use strict";var t=[],r=function(e,t){var r={};return Object.keys(e).forEach(function(t){r[t]=e[t]}),t&&Object.keys(t).forEach(function(e){r[e]=t[e]}),r},o=function(e,t,r,i){for(var a=0;a<t.length;a++){var s=t[a];Array.isArray(s)?i=o(e,s,r,i):null!==s&&void 0!==s&&(s.hasOwnProperty("vnodeSelector")||(s=n(s)),r.splice(i,0,s),i++)}return i},n=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:null===e||void 0===e?"":e.toString(),domNode:null}},i=function(e,t){if(null===t||void 0===t)return void 0;if(!Array.isArray(t))return t.hasOwnProperty("vnodeSelector")?[t]:[n(t)];for(var r=0;r<t.length;){var i=t[r];null===i||void 0===i?t.splice(r,1):Array.isArray(i)?(t.splice(r,1),r=o(e,i,t,r)):i.hasOwnProperty("vnodeSelector")?r++:(t[r]=n(i),r++)}return t},a={namespace:void 0,transitions:{enter:function(){throw new Error("Provide a transitions object to the projectionOptions to do animations")},exit:function(){throw new Error("Provide a transitions object to the projectionOptions to do animations")}}},s=function(e){return r(a,e)},d=function(e,t,r){if(t){var o=r.eventHandlerInterceptor;for(var n in t){var i=t[n];if("class"===n||"className"===n||"classList"===n)throw new Error("Property "+a+" is not supported, use 'classes' instead.");if("classes"===n)for(var a in i)i[a]&&e.classList.add(a);else if("styles"===n)for(var s in i){var d=i[s];if(d){if("string"!=typeof d)throw new Error("Style values may only be strings");e.style[s]=d}}else{if("key"===n)continue;if(null===i||void 0===i)continue;var u=typeof i;"function"===u?(o&&0===n.lastIndexOf("on",0)&&(i=o(n,i,e),"oninput"===n&&!function(){var e=i;i=function(t){t.target["oninput-value"]=t.target.value,e.apply(this,[t])}}()),e[n]=i):"string"===u&&"value"!==n?e.setAttribute(n,i):e[n]=i}}}},u=function(e,t,r,o){if(r){var n=!1;for(var i in r){var a=r[i],s=t[i];if("classes"===i){var d=e.classList;for(var u in a){var l=!!a[u],c=!!s[u];l!==c&&(n=!0,l?d.add(u):d.remove(u))}}else if("styles"===i)for(var f in a){var p=a[f],v=s[f];if(p!==v)if(n=!0,p){if("string"!=typeof p)throw new Error("Style values may only be strings");e.style[f]=p}else e.style[f]=""}else if(a||"string"!=typeof s||(a=""),"value"===i)e[i]!==a&&e["oninput-value"]!==a&&(e[i]=a),a!==s&&(n=!0);else if(a!==s){var m=typeof a;if("function"===m)throw new Error("Functions may not be updated on subsequent renders (property: "+i+"). Hint: declare event handler functions outside the render() function.");"string"===m?e.setAttribute(i,a):e[i]=a,n=!0}}return n}},l=function(e,t,r){if(t)for(var o=0;o<t.length;o++)y(t[o],e,void 0,r)},c=function(e,t){return e.vnodeSelector!==t.vnodeSelector?!1:e.properties&&t.properties?e.properties.key===t.properties.key:!e.properties&&!t.properties},f=function(e,t,r){if(""!==t.vnodeSelector)for(var o=r;o<e.length;o++)if(c(e[o],t))return o;return-1},p=function(e,t){if(e.properties){var r=e.properties.enterAnimation;r&&("function"==typeof r?r(e.domNode,e.properties):t.enter(e.domNode,e.properties,r))}},v=function(e,t){var r=e.domNode;if(e.properties){var o=e.properties.exitAnimation;if(o){r.style.pointerEvents="none";var n=function(){r.parentNode&&r.parentNode.removeChild(r)};return"function"==typeof o?void o(r,n,e.properties):void t.exit(e.domNode,e.properties,o,n)}}r.parentNode&&r.parentNode.removeChild(r)},m=function(e,t,r,o){var n=e[t];if(""!==n.vnodeSelector){var i=n.properties?n.properties.key:void 0;if(!i)for(var a=0;a<e.length;a++)if(a!==t){var s=e[a];if(c(s,n))throw new Error("added"===o?r.vnodeSelector+" had a "+n.vnodeSelector+" child added, but there is now more than one. You must add unique key properties to make them distinguishable.":r.vnodeSelector+" had a "+n.vnodeSelector+" child removed, but there were more than one. You must add unique key properties to make them distinguishable.")}}},h=function(e,r,o,n,i){if(o===n)return!1;o=o||t,n=n||t;for(var a,s=i.transitions,d=0,u=0,l=!1;u<n.length;){var h=d<o.length?o[d]:void 0,w=n[u];if(void 0!==h&&c(h,w))l=g(h,w,i)||l,d++;else{var x=f(o,w,d+1);if(x>=0){for(a=d;x>a;a++)v(o[a],s),m(o,a,e,"removed");l=g(o[x],w,i)||l,d=x+1}else y(w,r,d<o.length?o[d].domNode:void 0,i),p(w,s),m(n,u,e,"added")}u++}if(o.length>d)for(a=d;a<o.length;a++)v(o[a],s),m(o,a,e,"removed");return l},y=function(e,t,o,n){var i,a,s=e.vnodeSelector;if(""===s)i=e.domNode=document.createTextNode(e.text),void 0!==o?t.insertBefore(i,o):t.appendChild(i);else{var d,u=0,l="tag",c=void 0,f=s.length;for(a=0;f>a;a++){if(d=l,a===f-1)c=0===u?s:s.substr(u);else{var p=s.charAt(a);"."===p?(l="class",c=s.substring(u,a),u=a+1):"#"===p&&(l="id",c=s.substring(u,a),u=a+1)}void 0!==c&&("tag"===d?("svg"===c&&(n=r(n,{namespace:"http://www.w3.org/2000/svg"})),i=e.domNode=void 0!==n.namespace?document.createElementNS(n.namespace,c):document.createElement(c),void 0!==o?t.insertBefore(i,o):t.appendChild(i)):"class"===d?i.classList.add(c):i.id=c,c=void 0)}w(i,e,n)}},w=function(e,t,r){l(e,t.children,r),t.text&&(e.textContent=t.text),d(e,t.properties,r),t.properties&&t.properties.afterCreate&&t.properties.afterCreate(e,r,t.vnodeSelector,t.properties,t.children)},g=function(e,t,o){var n=e.domNode;if(!n)throw new Error("previous node was not mounted");var i=!1;if(e===t)return i;var a=!1;return""===t.vnodeSelector?t.text!==e.text&&(n.nodeValue=t.text,i=!0):("svg"===t.vnodeSelector.substr(0,3)&&(o=r(o,{namespace:"http://www.w3.org/2000/svg"})),e.text!==t.text&&(i=!0,void 0===t.text?n.removeChild(n.firstChild):n.textContent=t.text),a=h(t,n,e.children,t.children,o),a=u(n,e.properties,t.properties,o)||a,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate(n,o,t.vnodeSelector,t.properties,t.children)),a&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(n,t.properties,e.properties),t.domNode=e.domNode,i},x=e.performance&&e.performance.now?e.performance:{offset:new Date,now:function(){return new Date-this.offset}},S={lastCreateVDom:null,lastCreateDom:null,lastUpdateVDom:null,lastUpdateDom:null,lastProjector:null,createExecuted:function(e,t,r,o){S.lastProjector=o,S.lastCreateVDom=t-e,S.lastCreateDom=r-t},updateExecuted:function(e,t,r,o){S.lastProjector=o,S.lastUpdateVDom=t-e,S.lastUpdateDom=r-t}},b=function(e,t){if(!e.vnodeSelector)throw new Error("Invalid vnode argument");return{update:function(r){if(e.vnodeSelector!==r.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using mergeDom with one extra level)");g(e,r,t),e=r},domNode:e.domNode}},N={h:function(e,t,r){if(2===arguments.length&&"string"==typeof e){if(Array.isArray(t))r=t,t=void 0;else if(void 0===t)throw new Error("undefined is not a valid value for properties, maybe you forgot the comma between } and [ ?")}else if("string"!=typeof e||r&&!Array.isArray(r)||void 0!==t&&"object"!=typeof t)throw new Error("Incorrect arguments passed to the h() function. Correct signature: h(string, optional object, optional array)");var o=void 0;return r&&1===r.length&&"string"==typeof r[0]?(o=r[0],r=void 0):r=i(e,r),{vnodeSelector:e,properties:t,children:r,text:o,domNode:null}},createDom:function(e,t){return t=s(t),y(e,document.createElement("div"),void 0,t),b(e,t)},appendToDom:function(e,t,r){return r=s(r),y(t,e,void 0,r),b(t,r)},mergeDom:function(e,t,r){return r=s(r),t.domNode=e,w(e,t,r),b(t,r)},createProjector:function(e,t,r){r=s(r),r.eventHandlerInterceptor=function(e,t){return function(){return d.scheduleRender(),t.apply(this,arguments)}};var o,n=void 0,i=!1,a=function(){if(o=void 0,n){var i=x.now(),a=t(),s=x.now();n.update(a),S.updateExecuted(i,s,x.now(),d)}else{var u=x.now(),l=t(),c=x.now();n=N.mergeDom(e,l,r),S.createExecuted(u,c,x.now(),d)}};o=requestAnimationFrame(a);var d={scheduleRender:function(){o||i||(o=requestAnimationFrame(a))},destroy:function(){o&&(cancelAnimationFrame(o),o=void 0),i=!0}};return d},createCache:function(){var e=void 0,t=void 0,r={invalidate:function(){t=void 0,e=void 0},result:function(r,o){if(e)for(var n=0;n<r.length;n++)e[n]!==r[n]&&(t=void 0);return t||(t=o(),e=r),t}};return r},stats:S};"undefined"!=typeof module&&module.exports?module.exports=N:"function"==typeof define&&define.amd?define(function(){return N}):window.maquette=N}(this);